register:
  description: AUTH - Registration API.
  handler:
    - middlewares/bodyParser.bodyParser
    - then: middlewares/validations/auth/registrationValidation.validator
    - then: controllers/auth/register.handler
  package:
    exclude:
      - ./**
      - '!./controllers/auth/register*'
  layers:
    # Latest Version of the Layer Stack (Provided by serverless-latest-layer-version)
    - arn:aws:lambda:ap-south-1:124263955235:layer:logging:latest # LOGGING LAYER
    - arn:aws:lambda:ap-south-1:124263955235:layer:core:latest # CORE LAYER
  events:
    - http:
        path: /api/register
        method: post
        cors: true # To handle preflight requests

login:
  description: AUTH - Login API.
  handler:
    - middlewares/bodyParser.bodyParser
    - then: middlewares/validations/auth/loginValidation.validator
    - then: controllers/auth/login.handler
  package:
    exclude:
      - ./**
      - '!./controllers/auth/login*'
  events:
    - http:
        path: /api/login
        method: post
        cors: true # To handle preflight requests

profile:
  description: AUTH - Get Profile API.
  handler:
    - middlewares/authGuard.authGuard
    - then: controllers/auth/profile.handler
  package:
    exclude:
      - ./**
      - '!./controllers/auth/profile*'
  events:
    - http:
        path: /api/profile
        method: get
        cors: true # To handle preflight requests
